# LRMM Phase 3 체크리스트: MCP 서버 통합

> 기간: Week 2
> 목표: MCP 서버로 memory, state, system 명령어 노출

## 사전 요구사항
- [ ] Phase 1, 2 완료
- [ ] FastMCP 라이브러리 이해
- [ ] MCP 프로토콜 기본 지식

---

## 단위작업 3.1: FastMCP 서버 초기화

### 목표
MCP 서버 기본 구조를 설정하고 3개 핵심 도구를 등록한다.

### 구현 사항
- [ ] `src/server.py` 생성
- [ ] FastMCP 앱 인스턴스 생성
- [ ] 서버 메타데이터 설정 (name, version, description)
- [ ] 기본 로깅 설정

### 유효성 검사
- [ ] MCP 서버 이름 규칙 준수
- [ ] 버전 형식 검증 (semantic versioning)
- [ ] Python 패키지 구조 확인

### 테스트
- [ ] 서버 임포트 가능
- [ ] FastMCP 인스턴스 생성 성공
- [ ] 기본 메타데이터 확인

### 완료 기준
- [ ] 서버 파일 생성
- [ ] 기본 구조 검증
- [ ] 초기화 테스트 통과

---

## 단위작업 3.2: memory 도구 구현

### 목표
memory(action, paths, content, options) 도구를 MCP로 노출한다.

### 구현 사항
- [ ] @mcp.tool() 데코레이터로 memory 함수 등록
- [ ] 파라미터 타입 힌트 및 기본값 설정
- [ ] MemoryEngine 인스턴스와 연결
- [ ] 액션별 라우팅 로직 (save, get, search, update, delete)

### 유효성 검사
- [ ] MCP 도구 명명 규칙 확인
- [ ] 파라미터 스키마 검증
- [ ] 반환값 JSON 직렬화 가능
- [ ] 에러 처리 표준화

### 테스트
- [ ] 도구 등록 확인
- [ ] 각 action 호출 테스트
- [ ] 잘못된 action 처리
- [ ] 파라미터 검증 테스트

### 완료 기준
- [ ] memory 도구 등록 완료
- [ ] 모든 action 작동
- [ ] 에러 처리 구현
- [ ] 통합 테스트 통과

---

## 단위작업 3.3: state 도구 구현

### 목표
state(action, paths, content, options) 도구를 구현한다.

### 구현 사항
- [ ] StateManager 클래스 생성
- [ ] LangGraph 체크포인트 연동 준비
- [ ] checkpoint, restore, list, status 액션 구현
- [ ] @mcp.tool() 데코레이터로 등록

### 유효성 검사
- [ ] 상태 데이터 구조 검증
- [ ] 경로 형식 일관성
- [ ] LangGraph 호환성 확인

### 테스트
- [ ] 체크포인트 저장/복원
- [ ] 상태 목록 조회
- [ ] 동시성 처리 테스트

### 완료 기준
- [ ] state 도구 등록
- [ ] 기본 기능 구현
- [ ] 테스트 통과

---

## 단위작업 3.4: system 도구 구현

### 목표
system(action, paths, content, options) 도구로 시스템 관리 기능을 제공한다.

### 구현 사항
- [ ] SystemManager 클래스 생성
- [ ] status, backup, clean, config 액션 정의
- [ ] Redis 상태 모니터링 로직
- [ ] 시스템 메트릭 수집

### 유효성 검사
- [ ] 권한 검증 로직
- [ ] 안전한 시스템 작업 확인
- [ ] 백업 데이터 무결성

### 테스트
- [ ] 상태 조회 정확성
- [ ] 백업/복원 시나리오
- [ ] 설정 변경 테스트

### 완료 기준
- [ ] system 도구 구현
- [ ] 모든 관리 기능 작동
- [ ] 보안 검증 완료

---

## 단위작업 3.5: MCP 서버 실행 환경

### 목표
MCP 서버를 실행하고 Claude Desktop과 연동할 수 있도록 설정한다.

### 구현 사항
- [ ] 서버 진입점 (`__main__`) 구현
- [ ] stdio 전송 방식 설정
- [ ] 환경 변수 처리 (.env)
- [ ] Claude Desktop 설정 파일 작성

### 유효성 검사
- [ ] 실행 권한 확인
- [ ] 의존성 버전 호환성
- [ ] 설정 파일 JSON 문법

### 테스트
- [ ] 서버 시작/종료
- [ ] stdio 통신 테스트
- [ ] 도구 목록 조회
- [ ] 실제 도구 호출

### 완료 기준
- [ ] 서버 실행 가능
- [ ] Claude Desktop 연동
- [ ] 기본 도구 호출 성공

---

## 단위작업 3.6: 에러 처리 및 로깅

### 목표
일관된 에러 처리와 디버깅을 위한 로깅 시스템을 구축한다.

### 구현 사항
- [ ] MCP 표준 에러 응답 형식
- [ ] 구조화된 로깅 설정
- [ ] 에러 분류 및 코드 정의
- [ ] 디버그 모드 지원

### 유효성 검사
- [ ] 에러 코드 중복 확인
- [ ] 로그 레벨 적절성
- [ ] 민감 정보 필터링

### 테스트
- [ ] 각종 에러 시나리오
- [ ] 로그 출력 형식
- [ ] 에러 복구 로직

### 완료 기준
- [ ] 모든 에러 표준화
- [ ] 로깅 시스템 작동
- [ ] 디버깅 가능

---

## Phase 3 완료 체크리스트

### 산출물
- [ ] MCP 서버 실행 파일
- [ ] 3개 핵심 도구 구현
- [ ] Claude Desktop 설정
- [ ] 통합 테스트 스위트

### 품질 지표
- [ ] MCP 프로토콜 준수
- [ ] 도구 응답 시간 < 100ms
- [ ] 에러 처리율 100%
- [ ] 테스트 커버리지 80%+

### 문서화
- [ ] MCP 도구 API 문서
- [ ] 설정 가이드
- [ ] 에러 코드 참조
- [ ] 사용 예시

### 다음 단계 준비
- [ ] Phase 4 요구사항 검토
- [ ] 성능 최적화 포인트 식별
- [ ] 사용자 피드백 수집 계획

---

작성일: 2025-05-27
작성자: 1호
상태: 간략하게 핵심만! ✨
